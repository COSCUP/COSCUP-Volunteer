FROM alpine:3.12.0

WORKDIR /app
ADD ./requirements.txt ./requirements.txt
RUN \
  apk update && apk upgrade                                   && \
  apk add python3 curl ca-certificates cmake                     \
          gcc musl-dev libmemcached-dev python3-dev zlib-dev  && \
  curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py     && \
  python3 get-pip.py                                          && \
  rm get-pip.py                                               && \
  pip install -r ./requirements.txt                           && \
  apk del curl gcc musl-dev python3-dev zlib-dev cmake        && \
  rm -rf /var/cache/apk/* /var/lib/apk/* /etc/apk/cache/*
